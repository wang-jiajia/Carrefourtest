!function(i){function t(){this.$smallpic=i(".detail-left .smallPic"),this.$smallpicBox=i(".detail-left .smallPicBox"),this.$bigpic=i(".detail-left .bigPic"),this.$scale=i(".detail-left .scale"),this.$bigPicBox=i(".detail-left .bigPicBox"),this.$SwitchLi=i(".picSwitch .scrollBox li"),this.$SwitchUl=i(".picSwitch .scrollBox ul"),this.$SwitchBack=i(".picSwitch .leftClick"),this.$SwitchGo=i(".picSwitch .rightClick"),this.$SwitchLiWidth=76,this.num=5}t.prototype.init=function(){var t=this;this.$smallpicBox.hover(function(){t.mouseover()},function(){t.mouseout()}),this.$smallpicBox.on("mousemove",function(i){t.mousemove(i)}),this.$SwitchUl.on("mouseover","li",function(){t.changeurl(i(this))}),this.$SwitchUl.width(this.$SwitchLiWidth*this.$SwitchUl.attr("childNum")),this.$SwitchBack.on("click",function(){t.shiftBack()}),this.$SwitchGo.on("click",function(){t.shiftGo()})},t.prototype.mouseover=function(){this.$scale.show(),this.$bigPicBox.show(),this.$scale.css({width:this.$smallpic.width()/this.$bigpic.width()*this.$bigPicBox.width(),height:this.$smallpic.height()/this.$bigpic.height()*this.$bigPicBox.height()}),this.scaleRatio=this.$bigpic.width()/this.$smallpic.width()},t.prototype.mouseout=function(){this.$scale.hide(),this.$bigPicBox.hide()},t.prototype.mousemove=function(i){var t=i.pageX-this.$smallpic.offset().left-this.$scale.width()/2,s=i.pageY-this.$smallpic.offset().top-this.$scale.height()/2;t<=0?t=0:t>=this.$smallpic.width()-this.$scale.width()&&(t=this.$smallpic.width()-this.$scale.width()),s<=0?s=0:s>=this.$smallpic.height()-this.$scale.height()&&(s=this.$smallpic.height()-this.$scale.height()),this.$scale.css({left:t,top:s}),this.$bigpic.css({left:-t*this.scaleRatio,top:-s*this.scaleRatio})},t.prototype.changeurl=function(i){var t=i.find("img").attr("src");this.$smallpic.attr("src",t),this.$bigpic.attr("src",t),i.addClass("selected").siblings("li").removeClass("selected")},t.prototype.shiftBack=function(){this.$SwitchGo.css("opacity","1"),5<this.num&&(this.num--,this.$SwitchUl.animate({left:-(this.num-5)*this.$SwitchLiWidth},200)),this.num<=5&&this.$SwitchBack.css("opacity","0")},t.prototype.shiftGo=function(){this.$SwitchBack.css("opacity","1"),this.num<this.$SwitchUl.attr("childNum")&&(this.num++,this.$SwitchUl.animate({left:-(this.num-5)*this.$SwitchLiWidth},200)),this.num>=this.$SwitchUl.attr("childNum")&&this.$SwitchGo.css("opacity","0")},(new t).init()}(jQuery),function(t){function i(){this.$numInput=t(".buyBtnBox .buyNumber"),this.$numPlus=t(".input-plus"),this.$numMinus=t(".input-minus"),this.numToBuy=1}i.prototype.init=function(){var i=this;this.$numPlus.on("click",function(){i.numP()}),this.$numMinus.on("click",function(){i.numM()}),this.$numInput.on("blur",function(){/^\d+$/g.test(t(this).val())?99<=t(this).val()?(t(this).val(99),i.$numPlus.addClass("most"),i.$numMinus.removeClass("least")):(t(this).val()<=1?(t(this).val(1),i.$numMinus.addClass("least")):i.$numMinus.removeClass("least"),i.$numPlus.removeClass("most")):(t(this).val(1),i.$numMinus.addClass("least"),i.$numPlus.removeClass("most")),i.numToBuy=t(this).val()})},i.prototype.numP=function(){this.$numMinus.removeClass("least"),this.numToBuy<99&&(this.numToBuy++,this.$numInput.val(this.numToBuy),99<=this.numToBuy&&this.$numPlus.addClass("most"))},i.prototype.numM=function(){this.$numPlus.removeClass("most"),1<this.numToBuy&&(this.numToBuy--,this.$numInput.val(this.numToBuy),this.numToBuy<=1&&this.$numMinus.addClass("least"))},(new i).init()}(jQuery),function(i){i.cookie("username")&&(i(".not-logged-in").hide(),i(".logged_in").show().find(".loginName").html(i.cookie("username"))),i(".logout").on("click",function(){i.cookie("username",null,{expires:-1}),i(".logged_in").hide(),i(".not-logged-in").show()}),i(".not-logged-in .toLogin").attr("href","login.html?"+location.search.slice(1))}(jQuery),function(s){var h=[],o=[];s(".buyBtn").on("click",function(){var i=s(this).parents(".detail-right").find(".comTitle h2").attr("sid");if(h=s.cookie("cartsid")?s.cookie("cartsid").split(","):[],o=s.cookie("cartnum")?s.cookie("cartnum").split(","):[],-1!=s.inArray(i,h)){var t=parseInt(o[s.inArray(i,h)])+parseInt(s(".buyNumber").val());o[s.inArray(i,h)]=t,s.cookie("cartnum",o.toString(),{expires:7})}else h.push(i),s.cookie("cartsid",h.toString(),{expires:7}),o.push(s(".buyNumber").val()),s.cookie("cartnum",o.toString(),{expires:7})})}(jQuery);