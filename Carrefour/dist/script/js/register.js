!function(i){function s(){this.$protocolBox=i(".protocolCheckBox"),this.$protocolBtn=i(".protocolCheckBox .agreeBtn"),this.$formBox=i(".regFormBox"),this.$form=i("#regForm"),this.$username=i("#username"),this.$password=i("#password"),this.$confirm=i("#confirm"),this.$email=i("#email"),this.$tips=i("#regForm .tip"),this.protocolLock=!1,this.usernameLock=!1,this.passwordLock=!1,this.confirmLock=!1,this.emailLock=!1}s.prototype.init=function(){var s=this;this.$protocolBtn.on("click",function(){s.Vprotocol()}),this.$username.on("focus",function(){s.$tips.eq(0).show().css("color","#999").html("请输入3-15个字符，支持汉字、字母、数字、下划线、连字符")}),this.$password.on("focus",function(){s.$tips.eq(1).show().css("color","#999").html("请输入6-20个字符")}),this.$confirm.on("focus",function(){s.$tips.eq(2).show().css("color","#999").html("请再次输入密码")}),this.$email.on("focus",function(){s.$tips.eq(3).show().css("color","#999").html("请输入电子邮箱地址")}),this.$username.on("blur",function(){s.Vusername(i(this))}),this.$password.on("blur",function(){s.Vpassword(i(this))}),this.$confirm.on("blur",function(){s.Vconfirm(i(this))}),this.$email.on("blur",function(){s.Vemail(i(this))}),this.$form.on("submit",function(){return s.Vsubmit()})},s.prototype.Vprotocol=function(){this.protocolLock=!0,this.$protocolBox.hide(),this.$formBox.show()},s.prototype.Vusername=function(s){var o=this,t=s.val();""!=t?/^[\u4e00-\u9fa5\w\-]{3,15}$/.test(t)?i.ajax({url:"../../php/register.php",type:"post",data:{checkname:t}}).done(function(s){s?(o.$tips.eq(0).css("color","#F00").html("✘ 该用户名已经存在"),o.usernameLock=!1):(o.$tips.eq(0).css("color","#039D1C").html("✔"),o.usernameLock=!0)}):(this.$tips.eq(0).css("color","#F00").html("✘ 用户名格式错误"),o.usernameLock=!1):(this.$tips.eq(0).css("color","#F00").html("✘ 用户名不能为空"),this.usernameLock=!1)},s.prototype.Vpassword=function(s){var o=s.val();if(""!=o)if(/^[^\u4e00-\u9fa5]{6,20}$/.test(o)){var t=0;switch(/[\d]+/.test(o)&&t++,/[a-zA-Z]+/.test(o)&&t++,/[\W]+/.test(o)&&t++,t){case 1:this.$tips.eq(1).css("color","#F00").html("✔ 密码强度：弱");break;case 2:this.$tips.eq(1).css("color","#FFBA02").html("✔ 密码强度：中");break;case 3:this.$tips.eq(1).css("color","#039D1C").html("✔ 密码强度：强")}this.passwordLock=!0}else this.$tips.eq(1).css("color","#F00").html("✘ 密码格式错误"),this.passwordLock=!1;else this.$tips.eq(1).css("color","#F00").html("✘ 密码不能为空"),this.passwordLock=!1},s.prototype.Vconfirm=function(s){var o=this.$password.val(),t=s.val();""!=t?t==o?(this.$tips.eq(2).css("color","#039D1C").html("✔"),this.confirmLock=!0):(this.$tips.eq(2).css("color","#F00").html("✘ 两次输入的密码不一致"),this.confirmLock=!1):(this.$tips.eq(2).css("color","#F00").html("✘ 确认密码不能为空"),this.confirmLock=!1)},s.prototype.Vemail=function(s){var o=s.val();""!=o?/^[\w][\w\-]*\@[\w][\w\-]*\.[\w][\w\-\.]+$/.test(o)?(this.$tips.eq(3).css("color","#039D1C").html("✔"),this.emailLock=!0):(this.$tips.eq(3).css("color","F00").html("✘ 电子邮箱格式错误"),this.emailLock=!1):(this.$tips.eq(3).css("color","#F00").html("✘ 电子邮箱不能为空"),this.$emailLock=!1)},s.prototype.Vsubmit=function(){if(this.protocolLock||(alert("您必须先同意用户协议才能注册！"),window.location.reload()),""==this.$username.val()&&this.$tips.eq(0).show().css("color","#F00").html("✘ 用户名不能为空"),""==this.$password.val()&&this.$tips.eq(1).show().css("color","#F00").html("✘ 密码不能为空"),""==this.$confirm.val()&&this.$tips.eq(2).show().css("color","#F00").html("✘ 确认密码不能为空"),""==this.$email.val()&&this.$tips.eq(3).show().css("color","#F00").html("✘ 电子邮箱不能为空"),!(this.protocolLock&&this.usernameLock&&this.passwordLock&&this.confirmLock&&this.emailLock))return!1;alert("注册成功！确定后跳转登录页")},(new s).init()}(jQuery);